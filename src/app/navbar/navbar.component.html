<ngx-spinner bdColor = "rgba(51, 51, 51, 0.8)" size = "large" color = "#fff" type = "ball-spin"></ngx-spinner>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
	<span class="navbar-brand">
		<img src="/assets/logo_blue.png" width="40" height="40" alt="logo">
	</span>
	<button class="navbar-toggler" type="button" data-toggle=
	"collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
		<span class="navbar-toggler-icon"></span>
	</button>
	<div class="collapse navbar-collapse" id="navbarSupportedContent">
		<ul class="navbar-nav mr-auto">
			<li class="nav-item dropdown">
				<a class="nav-link dropdown-toggle" href="#" id="orderDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Orders</a>
				<div class="dropdown-menu" aria-labelledby="orderDropdownMenuLink">
					<a class="dropdown-item" routerLink="/admin/dashboard">Search</a>
					<a class="dropdown-item" data-toggle="modal" data-target="#newOrderModal">Add</a>
				</div>
			</li>
			<li class="nav-item">
				<a class="nav-link" routerLink="/admin/users">Users</a>
			</li>
		</ul>
		<ul class="navbar-nav ml-auto">
			<li class="nav-item dropdown my-4 my-lg-0">
				<a class="nav-link dropdown-toggle" href="#" id="userDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">User</a>
				<div class="dropdown-menu" aria-labelledby="userDropdownMenuLink">
					<a class="dropdown-item" data-toggle="modal" data-target="#resetPasswordModal">Reset Password</a>
					<div class="dropdown-divider"></div>
					<a class="dropdown-item" routerLink="#" (click)="logout()">Sign Out</a>
				</div>
			</li>
		</ul>
	</div>
</nav>
<br>
<div class="modal fade" id="resetPasswordModal" tabindex="-1" role="dialog">
	<div class="modal-dialog modal-lg" role="document">
		<div class="modal-content">
			<form class="was-validated" (ngSubmit)="savePassword()" #resetPasswordForm="ngForm">
				<div class="modal-header">
					<h5 class="modal-title">Reset New Password</h5>
				</div>
				<div class="modal-body">
					<div class="form-group">
						<label>Password</label>
						<input type="password" class="form-control form-control-sm" required [(ngModel)]="new_password" name="new_password">
						<div class="invalid-feedback">Enter new password</div>
					</div>
					<div class="form-group">
						<label>Confirm Password</label>
						<input type="password" class="form-control form-control-sm" required [(ngModel)]="new_password_confirm" name="new_password_confirm">
						<div class="invalid-feedback">Enter new password</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="submit" class="btn btn-primary" [disabled]="resetPasswordForm.form.invalid">Send</button>
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
				</div>
			</form>
		</div>
	</div>
</div>
<div class="modal fade" id="newOrderModal" tabindex="-1" role="dialog" aria-labelledby="newOrderModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-lg" role="document">
		<div class="modal-content">
			<form class="was-validated" (ngSubmit)="orderSubmit()" #newOrderForm="ngForm">
				<div class="modal-header">
					<h5 class="modal-title" id="newOrderModalLabel">Add Order</h5>
				</div>
				<div class="modal-body">
					<div class="form-group">
						<label>Property</label>
						<input type="text" required class="form-control form-control-sm" name="propertyAddress" [(ngModel)]="order.propertyAddress" placeholder="1 Apple Street, New York, NY 10001">
						<div class="invalid-feedback">Please add property address</div>
					</div>
					<div class="form-group">
						<label>Reference #</label>
						<input type="text" class="form-control form-control-sm" name="referenceNumber" [(ngModel)]="order.referenceNumber" placeholder="123456">
					</div>
					<div class="form-group">
						<label>Lender</label>
						<input type="text" class="form-control form-control-sm" name="lender" [(ngModel)]="order.lender" placeholder="Bank of Awesome">
					</div>
					<div class="form-group">
						<label>Corporation</label>
						<input type="text" required class="form-control form-control-sm" name="corporation" [(ngModel)]="order.corporation" placeholder="Joe Schmo">
						<div class="invalid-feedback">Please add corporation</div>
					</div>
					<div class="form-group">
						<label>Purchase Price</label>
						<div class="input-group input-group-sm mb-3">
							<div class="input-group-prepend">
								<span class="input-group-text">$</span>
							</div>
							<input type="number" required min="1" interval="1" class="form-control form-control-sm" name="purchasePrice" [(ngModel)]="order.purchasePrice">
							<div class="input-group-append">
								<span class="input-group-text">.00</span>
							</div>
							<div class="invalid-feedback">Please add purchase price</div>
						</div>
					</div>
					<div class="form-group">
						<label>Loan Amount</label>
						<div class="input-group input-group-sm mb-3">
							<div class="input-group-prepend">
								<span class="input-group-text">$</span>
							</div>
							<input type="number" min="1" interval="1" class="form-control form-control-sm" name="loanAmount" [(ngModel)]="order.loanAmount">
							<div class="input-group-append">
								<span class="input-group-text">.00</span>
							</div>
						</div>
					</div>
					<div class="form-group">
						<label>Buyer(s)</label>
						<table class="table table-sm table-bordered">
							<thead class="thead-light">
								<tr>
									<th scope="col">Name</th>
									<th scope="col">Address</th>
								</tr>
							</thead>
							<tbody>
								<tr *ngFor="let field of order.buyerFieldArray; index as i;">
									<td><input type="text" required class="form-control form-control-sm" placeholder="Chris Jones" [(ngModel)]="order.buyerFieldArray[i].name" name="buyer_name_{{i}}"><div class="invalid-feedback">Please add name</div></td>
									<td><input type="text" required class="form-control form-control-sm" placeholder="2 Apple Street, New York, NY 10001" [(ngModel)]="order.buyerFieldArray[i].address" name="buyer_address_{{i}}"><div class="invalid-feedback">Please add address</div></td>
								</tr>
							</tbody>
							<tfoot>
								<tr>
									<td colspan="2">
										<button type="button" class="btn btn-dark btn-block btn-sm" (click)="addBuyer()">Add Buyer</button>
										<button type="button" [disabled]="buyer_index === 0" class="btn btn-dark btn-block btn-sm" (click)="deleteBuyer()">Remove Buyer</button>
									</td>
								</tr>
							</tfoot>
						</table>
					</div>
					<div class="form-group">
						<label>Seller(s)</label>
						<table class="table table-sm table-bordered">
							<thead class="thead-light">
								<tr>
									<th scope="col">Name</th>
									<th scope="col">Address</th>
								</tr>
							</thead>
							<tbody>
								<tr *ngFor="let field of order.sellerFieldArray; index as i;">
									<td><input type="text" required class="form-control form-control-sm" placeholder="Chris Jones" [(ngModel)]="order.sellerFieldArray[i].name" name="seller_name_{{i}}"><div class="invalid-feedback">Please add name</div></td>
									<td><input type="text" required class="form-control form-control-sm" placeholder="2 Apple Street, New York, NY 10001" [(ngModel)]="order.sellerFieldArray[i].address" name="seller_address_{{i}}"><div class="invalid-feedback">Please add address</div></td>
								</tr>
							</tbody>
							<tfoot>
								<tr>
									<td colspan="2">
										<button type="button" class="btn btn-dark btn-block btn-sm" (click)="addSeller()">Add Seller</button>
										<button type="button" [disabled]="seller_index === 0" class="btn btn-dark btn-block btn-sm" (click)="deleteSeller()">Remove Seller</button>
									</td>
								</tr>
							</tfoot>
						</table>
					</div>
				</div>
				<div class="modal-footer">
					<button type="submit" class="btn btn-primary" [disabled]="newOrderForm.form.invalid">Save</button>
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
				</div>
			</form>
		</div>
	</div>
</div>