<br>
<div class="container">
	<app-navbar></app-navbar>
	<div class="row">
		<div class="col">
			<div class="alert alert-success collapse" id="order_new" role="alert">
			Order Added
			<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			</div>
		</div>
	</div>
	<div class="card">
		<div class="card-header">Filters</div>
		<div class="card-body">
			<div class="row">
				<div class="col">
					<label>Corporation</label>
					<input type="text" [(ngModel)]="filters.corporation" class="form-control form-control-sm" placeholder="ABC Corporation">
				</div>
				<div class="col">
					<label>Property Address</label>
					<input type="text" [(ngModel)]="filters.property_address" class="form-control form-control-sm" placeholder="1 Apple Street, New York, NY 10001">
				</div>
				<div class="col">
					<label>Order Reference</label>
					<input type="text" [(ngModel)]="filters.reference_number" class="form-control form-control-sm" placeholder="123456">
				</div>
				<div class="col">
					<label>Lender</label>
					<input type="text" [(ngModel)]="filters.lender" class="form-control form-control-sm" placeholder="Bank of Money">
				</div>
			</div>
			<br>
			<div class="row">
				<div class="col">
					<label>Closing Date</label>
					<div class="input-group mb-3">
						<input type="text" [(ngModel)]="filters.closing_date" class="form-control form-control-sm" placeholder="YYYY-MM-DD" ngbDatepicker #d="ngbDatepicker">
						<div class="input-group-append">
							<button class="btn btn-outline-dark btn-sm" type="button" (click)="d.toggle()"><i class="far fa-calendar-alt"></i></button>
						</div>
					</div>
				</div>
				<div class="col">
					<label>Status</label>
					<select class="form-control form-control-sm" [(ngModel)]="filters.closed">
						<option></option>
						<option value="0">Open</option>
						<option value="1">Closed</option>
					</select>
				</div>
			</div>
			<div class="row">
				<div class="col text-right">
					<div class="btn-group" role="group">
						<button type="button" class="btn btn-info btn-sm" (click)="clear()">Clear</button>
						<button type="button" class="btn btn-success btn-sm" (click)="search(filters)">Search</button>
					</div>
				</div>
			</div>			
		</div>
	</div>
	<br>
	<div class="list-group">
		<a [routerLink]="['/admin/dashboard/order', order.id]" class="list-group-item list-group-item-action flex-column align-items-start {{order.closed ? 'list-group-item-danger' : 'list-group-item-success'}}" *ngFor="let order of orders">
			<div class="d-flex w-100 justify-content-between">
				<h5 class="mb-1">{{order.property_address}}</h5>
				<small>Last Updated {{order.updatedAt | timeAgo}}</small>
			</div>
			<p class="mb-1">{{order.corporation}}</p>
			<small>
				<b>Buyers: {{order.buyers.join(", ")}}</b>
				<br>
				<b>Sellers: {{order.sellers.join(", ")}} </b>
			</small>
		</a>
	</div>
	<div class="row" *ngIf="orders.length < 1">
		<div class="col">No Orders</div>
	</div>
	<br>
</div>